##### 安装插件

1. 项目安装`cordova-hot-code-push-plugin`插件

   ```
   cordova plugin add cordova-hot-code-push-plugin
   ```

2. 全局安装`cordova-hot-code-push-cli`工具
   ```
   npm install -g cordova-hot-code-push-cli
   ```

##### 生成配置文件

1. 修改 config.xml 配置文件

   ```xml
   <chcp>
    <auto-download enabled="true" />

    <auto-install enabled="true" />

    <native-interface version="1" />

    <config-file url="https://www.xxxx.com/chcp.json" />
   </chcp>
   ```

   > config-file：配置文件 chcp.json 从服务器上加载的路径（必须的配置项）
   >
   > auto-download：是否自动下载热更新代码，默认是 true
   > auto-install：是否自动安装热更新代码，默认是 true
   > native-interface：当前 native side 的版本号

2) 通过`cordova-hot-code-push-cli`工具生成配置文件

   ```
   cordova-hcp init
   ```

   > 执行时将要求您从命令行中填写一些项目首选项：
   >
   > Project name: 你现在的项目名称所需.
   > Amazon S3 Bucket name:亚马逊上的 S3 桶的名字。可以跳过。
   > Amazon S3 region: 亚马逊 S3 地区。可以跳过。
   > iOS app identifier: 应用程序商店的应用程序 ID。App 升级是跳转应用商店进行升级。
   > Android app identifier: 可以 App 在应用商城的地址，或者是 apk 的下载地址。
   > Update method: 何时执行更新。
   > start: 在启动应用程序时安装更新。
   > resume: 在恢复应用程序(从背景移动到前景状态)或启动时，安装更新；默认使用。
   > now: 从服务器加载更新后立即安装。
   >
   > 最终生成：
   > {
   >
   > "name": "",//可为空
   > "autogenerated": true,//如果不添加，热更新会不能使用
   > "ios_identifier": "id123456789",//应用在 App store id(可为空)
   > "android_identifier": "",//应用在应用商城上的地址或者 App 的下载地址(可为空)
   > "update": "start",//在应用启动时安装
   > "min_native_interface": 1,//可用以做 App 升级（可以不填)
   > "content_url":
   > "http://wwww.xxx.com" //WEB 文件在服务器上的地址(PS:与 config.xml 中的保持一致)
   > }

3. 给 web 文件生成配置文件

   ```

   cordova-hcp build

   ```

   > 会在 wwww 文件夹下生成两个文件
   >
   > - chcp.json: 包含发布相关信息：热更新代码版本号，应用 native side 版本号等等
   > - chcp.manifest: 包含项目热更新代码(静态)文件信息：文件名和文件哈希值

4)  打包成 APP


    5. 修改web代码，执行`cordova-hcp build`然后再讲代码放到web服务器中（本地可以起nginx服务测试）

##### 参考资料

[Link1](https://www.cnblogs.com/sunylat/p/9896938.html)

[Link2](https://juejin.im/entry/5c3c5e4b51882524c84ec33a)`重点`

[Link3](http://www.huangwenchao.com.cn/2017/04/cordova-代码热更新解决方案.html)
